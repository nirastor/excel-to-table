{"version":3,"sources":["../node_modules/shelljs/src sync /^/.//.*$","js/FileInput.js","js/FileInfo.js","js/tabs.js","js/utils.js","js/CreateTable.js","js/Jnvpl.js","js/App.js","js/getUniqueMNN.js","js/getSumm.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","FileInput","props","readFile","bind","handleSubmit","handleInput","setNewFile","file","target","files","this","preventDefault","name","split","pop","reader","FileReader","readAsArrayBuffer","extension","getFileExtension","onload","data","Uint8Array","result","workbook","XLSX","read","type","firstSheetName","Workbook","Sheets","firstSheet","utils","sheet_to_json","header","console","log","url","URL","createObjectURL","tables","Mdb","list","setNewTable","onerror","error","className","onSubmit","onInput","React","Component","FileInfo","state","isOpen","handleToggle","handleDeleteFile","setState","fileInfoContent","toggleArrowClass","fileName","onClick","width","height","viewBox","fill","xmlns","fillRule","clipRule","d","createTabs","tabs","tab","selectedTab","push","handleTabChange","displayName","round2digitsToText","num","parts","Math","round","parseFloat","toString","length","join","CreateTable","table","columns","hasFooter","getCellsOfRow","row","opt","cells","forEach","cell","index","PRICE_POSITION","isFooter","EXPENSES_POSITION","cellClass","VALUE_POSITION","TRADE_NAME_POSITION","REALIZE_FORM_POSITION","indexOf","item","isHead","tableFooters","tableHeaders","lastRow","rows","i","Jnvpl","newTable","App","original","expenses","uniqueMNN","MNN_POSITION","newFileName","newTab","slice","originTable","detachedHeadersLine","splice","sort","a","b","Intl","Collator","compare","summaryTable","addValue","parseInt","addPrice","lastValue","lastPrice","weightedPrice","unshift","getUniqueMNN","totalValue","totalExpenses","value","getSumm","getTable","getTabContent","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.eac67b68.chunk.js","sourcesContent":["var map = {\n\t\"./cat\": 35,\n\t\"./cat.js\": 35,\n\t\"./cd\": 18,\n\t\"./cd.js\": 18,\n\t\"./chmod\": 36,\n\t\"./chmod.js\": 36,\n\t\"./common\": 1,\n\t\"./common.js\": 1,\n\t\"./cp\": 19,\n\t\"./cp.js\": 19,\n\t\"./dirs\": 37,\n\t\"./dirs.js\": 37,\n\t\"./echo\": 38,\n\t\"./echo.js\": 38,\n\t\"./error\": 20,\n\t\"./error.js\": 20,\n\t\"./exec\": 39,\n\t\"./exec.js\": 39,\n\t\"./find\": 40,\n\t\"./find.js\": 40,\n\t\"./grep\": 41,\n\t\"./grep.js\": 41,\n\t\"./head\": 42,\n\t\"./head.js\": 42,\n\t\"./ln\": 43,\n\t\"./ln.js\": 43,\n\t\"./ls\": 23,\n\t\"./ls.js\": 23,\n\t\"./mkdir\": 44,\n\t\"./mkdir.js\": 44,\n\t\"./mv\": 45,\n\t\"./mv.js\": 45,\n\t\"./popd\": 46,\n\t\"./popd.js\": 46,\n\t\"./pushd\": 47,\n\t\"./pushd.js\": 47,\n\t\"./pwd\": 22,\n\t\"./pwd.js\": 22,\n\t\"./rm\": 24,\n\t\"./rm.js\": 24,\n\t\"./sed\": 48,\n\t\"./sed.js\": 48,\n\t\"./set\": 49,\n\t\"./set.js\": 49,\n\t\"./sort\": 50,\n\t\"./sort.js\": 50,\n\t\"./tail\": 51,\n\t\"./tail.js\": 51,\n\t\"./tempdir\": 21,\n\t\"./tempdir.js\": 21,\n\t\"./test\": 52,\n\t\"./test.js\": 52,\n\t\"./to\": 53,\n\t\"./to.js\": 53,\n\t\"./toEnd\": 54,\n\t\"./toEnd.js\": 54,\n\t\"./touch\": 55,\n\t\"./touch.js\": 55,\n\t\"./uniq\": 56,\n\t\"./uniq.js\": 56,\n\t\"./which\": 57,\n\t\"./which.js\": 57\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 82;","import React from 'react';\nimport XLSX from 'xlsx';\n// import { AccessParser } from 'accessdb-parser';\nimport Mdb from 'mdb-parse';\n\nexport default class FileInput extends React.Component {\n  constructor(props) {\n    super();\n    this.readFile = this.readFile.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleInput = this.handleInput.bind(this);\n    this.setNewFile = props.setNewFile;\n  }\n\n  handleInput(e) {\n    const file = e.target.files[0];\n    this.readFile(file); \n  }\n  \n  handleSubmit(e) {\n    e.preventDefault();\n    const file = e.target[0].files[0];\n    this.readFile(file);  \n  }\n\n  getFileExtension(file) {\n    const nameAndExt = file.name.split('.');\n    return nameAndExt.pop();\n  }\n\n  readFile(file) {\n    const reader = new FileReader();\n    reader.readAsArrayBuffer(file);\n\n    const extension = this.getFileExtension(file);\n\n    if (extension === 'xlsx') {\n      reader.onload = () => {\n        const data = new Uint8Array(reader.result);\n        const workbook = XLSX.read(data, {type: 'array'});\n        const firstSheetName = workbook.Workbook.Sheets[0].name\n        const firstSheet = XLSX.utils.sheet_to_json(workbook.Sheets[firstSheetName], {header:1})\n        this.setNewFile(firstSheet, file.name);\n      };\n    }\n\n    if (extension === 'accdb') {\n      console.log(file);\n      const url = URL.createObjectURL(file);\n      console.log(url);\n      const db = new Mdb(url);\n      const tables = db.list();\n      this.setNewTable(tables);\n      \n      // reader.onload = () => {\n      //   const db = new AccessParser(reader.result);\n      //   const tables = db.getTables();\n      //   this.setNewTable(tables);\n      // };\n    }\n  \n    reader.onerror = function() {\n      console.log(reader.error);\n    };\n  }\n\n  render() {\n    return (\n      <form className=\"inputfile\" onSubmit={this.handleSubmit}>\n        <div className=\"inputfile-input-container\">\n          <input className=\"inputfile-input-input\" type=\"file\" onInput={this.handleInput}></input>\n          <div className=\"inputfile-input-cover\">\n            Нажмите, чтобы добавить файл.<br />\n            Или перетащите с компьютера</div>\n        </div>\n      </form>\n    );\n  }\n}","import React from 'react';\n\nexport default class FileInfo extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isOpen: true,\n    }\n    this.handleToggle = this.handleToggle.bind(this);\n    this.handleDeleteFile = this.handleDeleteFile.bind(this);\n    this.setNewFile = props.setNewFile;\n  }\n\n  handleToggle() {\n    this.setState((state) => ({\n      isOpen: !state.isOpen,\n    }));\n  }\n\n  handleDeleteFile() {\n    this.props.setNewFile(null, null);\n  }\n\n  render() {    \n    let toggleArrowClass = 'fileinfo-arrow';\n    if (!this.state.isOpen) {\n      toggleArrowClass += ' is-closed';\n    }\n\n    let fileInfoContent;\n    if (this.state.isOpen) {\n      fileInfoContent = (\n        <div className=\"fileinfo-row\">\n          <div className=\"fileinfo-text\">\n            <span>Выбран файл: </span>\n            <span className=\"fileinfo-filename\">{this.props.fileName}</span>\n          </div>\n          <div className=\"fileinfo-del\" onClick={this.handleDeleteFile}>\n            <svg className=\"fileinfo-del-icon\" width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M14 1.4L12.6 0L7 5.6L1.4 0L0 1.4L5.6 7L0 12.6L1.4 14L7 8.4L12.6 14L14 12.6L8.4 7L14 1.4Z\" fill=\"currentcolor\"/>\n            </svg>\n            <div className=\"fileinfo-del-tooltip\">Удалить файл и&nbsp;выбрать другой</div>\n          </div>\n        </div>\n      );\n    }\n    \n    return (\n      <div className=\"block fileinfo\">\n        {fileInfoContent}\n        <div className=\"fileinfo-toggle\" onClick={this.handleToggle}>\n        <svg className={toggleArrowClass} width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M12 8L6 14L7.4 15.4L12 10.8L16.6 15.4L18 14L12 8Z\" fill=\"currentcolor\"/>\n        </svg>\n        </div>\n      </div>\n    );\n  }\n\n}","export default function createTabs(props) {\n  let tabs = [];\n  for (let tab in props.tabs) {\n    let className = 'tab';\n    if (tab === props.selectedTab) {\n      className += ' tab--selected';\n    }\n    tabs.push(\n      <li key={tab} id={tab} className={className} onClick={props.handleTabChange}>\n        {props.tabs[tab].displayName}\n      </li>\n    );\n  }\n  \n  return (\n    <ul className=\"tabs\">\n      {tabs}\n    </ul>\n  );\n}\n","export function round2digitsToText(num) {\n  const rounded = Math.round(parseFloat(num) * 100) / 100;\n  const parts = rounded.toString().split('.');\n  if (parts.length === 1) {\n    parts.push('00');\n  } else {\n    while (parts[1].length !== 2) {\n      parts[1] += '0';\n    }\n  }\n  return parts.join('.');\n}\n","import {round2digitsToText} from './utils';\nimport {Fragment} from 'react';\n\nexport default function CreateTable(props) {  \n  const table = props.table;\n  const columns = props.columns;\n  const hasFooter = props.hasFooter;\n  \n  if (!table) {\n    return false;\n  }\n  \n  function getCellsOfRow(row, opt = false) {\n    const cells = [];\n    row.forEach((cell, index) => {\n      if ((!opt && index === columns.PRICE_POSITION) ||\n        ((!opt || opt.isFooter) && index === columns.EXPENSES_POSITION)) {\n        cell = round2digitsToText(cell);\n      }\n\n      let cellClass = 'cell';\n      if (index === columns.PRICE_POSITION\n        || index === columns.VALUE_POSITION\n        || index === columns.EXPENSES_POSITION) {\n        cellClass += ' cell-digit';\n      } else {\n        cellClass += ' cell-text';\n      }\n\n      if (index === columns.TRADE_NAME_POSITION || index === columns.REALIZE_FORM_POSITION) {\n        console.log(cell, typeof cell, cell.indexOf('\\n'));\n        cell = cell.split('\\n').map((item) =>\n          <Fragment>\n            <span>{item}</span><br />\n          </Fragment>);\n      }\n      \n      if (opt.isHead) {\n        cells.push(\n          <th className={cellClass}>{cell}</th>\n        );\n      } else {\n\n        cells.push(\n          <td className={cellClass}>{cell}</td>\n        );\n      }\n    });\n    return (\n      <tr>{cells}</tr>\n    );\n  }\n  \n  const tableHeaders = getCellsOfRow(table[0], {isHead: true});\n  let tableFooters;\n  \n  let lastRow = table.length - 1\n  if (hasFooter) {\n    tableFooters = getCellsOfRow(table[table.length - 1], {isFooter: true});\n    lastRow -= 1;\n  }\n  \n  const rows = [];\n  for (let i = 1; i < lastRow; i += 1) {\n    rows.push(getCellsOfRow(table[i]));\n  }\n  \n  return (\n    <table>\n      <thead>\n        {tableHeaders}\n      </thead>\n      <tbody>\n        {rows}\n      </tbody>\n      <tfoot>\n         {tableFooters}\n      </tfoot>\n    </table>\n  );\n}","import React from 'react';\nimport FileInput from './FileInput';\n\nexport default class Jnvpl extends React.Component {\n  constructor(props) {\n    super(props);\n    this.setNewTable = this.setNewTable.bind(this);\n    this.state = {\n      table: null\n    }\n  }\n\n  setNewTable(newTable) {\n    this.setState({table: newTable});\n  }\n\n  render() {\n    if (!this.state.table) {\n      return (\n        <div className=\"jnvlp\">\n          <div className=\"jnvlp-text\">Для отображения ЖНВЛП загрузите файл базы данных</div>\n          <div className=\"jnvlp-fileinput\">\n          <FileInput\n            setNewTable={this.setNewTable}\n          />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div>Файл загружен</div>\n    );\n  }\n}","import React from 'react';\n\nimport FileInput from './FileInput';\nimport FileInfo from './FileInfo';\nimport Tabs from './tabs';\nimport CreateTable from './CreateTable';\nimport Jnvpl from './Jnvpl';\n\nimport getSumm from './getSumm';\nimport getUniqueMNN from './getUniqueMNN';\n\nexport default class App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      tab: \"original\",\n      table: null,\n      fileName: null,\n    };\n    this.tabs = {\n      original: {\n        displayName: 'Оригинал',\n      },\n      expenses: {\n        displayName: 'Затраты',\n      },\n      uniqueMNN: {\n        displayName: 'Уникальные МНН',\n      },\n      // jnvpl: {\n      //   displayName: 'ЖНВЛП',\n      // }\n    };\n    this.handleTabChange = this.handleTabChange.bind(this);\n    this.setNewFile = this.setNewFile.bind(this);\n    this.columns = {\n      MNN_POSITION: 0,\n      TRADE_NAME_POSITION: 1,\n      REALIZE_FORM_POSITION: 2,\n      VALUE_POSITION: 3,\n      PRICE_POSITION: 4,\n      EXPENSES_POSITION: this.state.table ? this.state.table[0].length - 1 : null\n    }\n  }\n\n  setNewFile(newTable, newFileName) {\n    this.setState({\n      table: newTable,\n      fileName: newFileName\n    });\n  }\n  \n  handleTabChange(e) {\n    const newTab = e.target.id\n    this.setState({tab: newTab});\n  }\n\n  getTable() {\n    if (!this.state.table) {\n      return false;\n    }\n    \n    let table = this.state.table.map((row) => row.slice());\n    \n    if (this.state.tab === \"uniqueMNN\") {\n      table = getUniqueMNN(table, this.columns);\n    }\n\n    if (this.state.tab !== \"original\") {\n      table = getSumm(table, this.columns);\n    }\n\n    return table;\n  }\n\n  getTabContent() {\n    if (this.state.tab === 'jnvpl') {\n      return (\n        <Jnvpl />\n      );\n    }\n\n    return (\n      <CreateTable\n        table={this.getTable()}\n        columns={this.columns}\n        hasFooter={this.state.tab === 'original' ? false : true}\n      />\n    );\n  }\n\n  render() {    \n    if (!this.state.table) {\n      return (\n        <div className=\"app-fileinput\">\n          <FileInput\n            setNewFile={this.setNewFile}\n          />\n        </div>\n\n      );\n    }\n    \n    return (\n      <div className=\"app-container\">\n        <FileInfo\n          fileName={this.state.fileName}\n          setNewFile={this.setNewFile}\n        />\n        <Tabs\n          tabs={this.tabs}\n          selectedTab={this.state.tab}\n          handleTabChange={this.handleTabChange}\n        />\n        {this.getTabContent()}\n      </div>\n    );\n  }\n}\n","export default function getUniqueMNN(originTable, columns) {\n  const table = originTable.map((row) => row.slice());\n\n  const detachedHeadersLine = table.splice(0, 1)[0];\n  \n  // sort with 'e — ё' difference support\n  table.sort((a,b) => {\n    const collator = new Intl.Collator();\n    return collator.compare(a[0], b[0]);\n  });\n\n  const summaryTable = table.splice(0, 1);\n  table.forEach((row) => {\n    const lastRow = summaryTable[summaryTable.length - 1];\n    if (row[0] === lastRow[0]) {\n      const addValue = parseInt(row[columns.VALUE_POSITION]);\n      const addPrice = parseFloat(row[columns.PRICE_POSITION]);\n      const lastValue = parseInt(lastRow[columns.VALUE_POSITION]);\n      const lastPrice = parseFloat(lastRow[columns.PRICE_POSITION]);\n      \n      lastRow[columns.VALUE_POSITION] = lastValue + addValue;\n      const weightedPrice = (lastValue * lastPrice + addValue * addPrice) / (lastValue + addValue)\n      lastRow[columns.PRICE_POSITION] = weightedPrice;\n      lastRow[columns.TRADE_NAME_POSITION] += `\\n${row[columns.TRADE_NAME_POSITION]}`;\n      lastRow[columns.REALIZE_FORM_POSITION] += `\\n${row[columns.REALIZE_FORM_POSITION]}`;\n    } else {\n      summaryTable.push(row);\n    }\n  });\n\n  summaryTable.unshift(detachedHeadersLine);\n\n  return summaryTable\n}\n","export default function Expenses(originTable, columns) {  \n  const table = originTable.map((row) => row.slice());\n\n  table[0].push('Затраты');\n  columns.EXPENSES_POSITION = table[0].length - 1;\n\n  let totalValue = 0;\n  let totalExpenses = 0;\n\n  for (let i = 1; i < table.length; i += 1) {\n    const row = table[i];\n    const value = parseInt(row[columns.VALUE_POSITION]);\n    const price = parseFloat(row[columns.PRICE_POSITION]);\n    const expenses = value * price;\n    row.push(expenses);\n    totalValue += value;\n    totalExpenses += expenses\n  }\n\n  table.push([]);\n  for (let i = 0; i < table[0].length; i += 1) {\n    table[table.length - 1][i] = ' ';\n  }\n  table[table.length - 1][columns.MNN_POSITION] = 'Итого:'\n  table[table.length - 1][columns.VALUE_POSITION] = totalValue;\n  table[table.length - 1][columns.EXPENSES_POSITION] = totalExpenses;\n\n  return table;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './js/App';\n\nimport './css/style.css';\nimport './css/fileinfo.css';\nimport './css/fileinput.css';\nimport './css/tabs.css';\nimport './css/table.css';\nimport './css/jnvlp.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}